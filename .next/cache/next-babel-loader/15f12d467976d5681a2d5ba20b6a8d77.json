{"ast":null,"code":"import Web3 from 'web3';\nwindow.ethereum.request({\n  method: \"eth_requestAccounts\"\n});\nwindow.web3 = new Web3(window.ethereum);\nconst account = web3.eth.accounts;\nconst fromAddress = account.givenProvider.selectedAddress;\nconst toAddress = '0x57102EB7596D54cE2C139C7b047024286ca8Ba54';\nconst txData = {\n  nonce,\n  gasLimit,\n  gasPrice,\n  value,\n  data,\n  // containing info that you want to `transfer()` to the `receiver`\n  from: fromAddress,\n  // send transaction from your address\n  to: toAddress // CHANGED; send transaction to the contract address\n\n};\n\nfunction tx() {\n  if (window.ethereum && window.ethereum.chainId == '0') {\n    window.ethereum.request({\n      method: \"eth_requestAccounts\"\n    });\n    window.web3 = new Web3(window.ethereum);\n    const account = web3.eth.accounts;\n    const fromAddress = account.givenProvider.selectedAddress;\n\n    var Tx = require(\"ethereumjs-tx\").Transaction;\n\n    var amount = web3.utils.toHex(1e16);\n    web3.eth.getTransactionCount(fromAddress).then(function (v) {\n      console.log(v);\n    }); // set your private key here, we'll sign the transaction below\n\n    var privateKey = \"77dc2BE0B2463F8E049502330d5C9791\";\n    const privateKeyBuffer = Buffer.from(privateKey, 'hex');\n    var contract = new web3.eth.Contract(abi, tokenContractAddress, {\n      from: fromAddress\n    });\n    const transaction = new Tx.Transaction(txData);\n    transaction.sign(privateKeyBuffer);\n    web3.eth.sendSignedTransaction('0x' + transaction.serialize().toString('hex'));\n  }\n}\n\nexport default tx;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/ecommerce-dapp/components/transaction.js"],"names":["Web3","window","ethereum","request","method","web3","account","eth","accounts","fromAddress","givenProvider","selectedAddress","toAddress","txData","nonce","gasLimit","gasPrice","value","data","from","to","tx","chainId","Tx","require","Transaction","amount","utils","toHex","getTransactionCount","then","v","console","log","privateKey","privateKeyBuffer","Buffer","contract","Contract","abi","tokenContractAddress","transaction","sign","sendSignedTransaction","serialize","toString"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AAGAC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB;AAAEC,EAAAA,MAAM,EAAE;AAAV,CAAxB;AACAH,MAAM,CAACI,IAAP,GAAc,IAAIL,IAAJ,CAASC,MAAM,CAACC,QAAhB,CAAd;AACA,MAAMI,OAAO,GAAGD,IAAI,CAACE,GAAL,CAASC,QAAzB;AACA,MAAMC,WAAW,GAAGH,OAAO,CAACI,aAAR,CAAsBC,eAA1C;AACA,MAAMC,SAAS,GAAG,4CAAlB;AAEA,MAAMC,MAAM,GAAG;AACXC,EAAAA,KADW;AAEXC,EAAAA,QAFW;AAGXC,EAAAA,QAHW;AAIXC,EAAAA,KAJW;AAKXC,EAAAA,IALW;AAKL;AACNC,EAAAA,IAAI,EAAEV,WANK;AAMQ;AACnBW,EAAAA,EAAE,EAAER,SAPO,CAOG;;AAPH,CAAf;;AASA,SAASS,EAAT,GAAa;AACT,MAAIpB,MAAM,CAACC,QAAP,IAAmBD,MAAM,CAACC,QAAP,CAAgBoB,OAAhB,IAA2B,GAAlD,EAAuD;AACnDrB,IAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAAxB;AACRH,IAAAA,MAAM,CAACI,IAAP,GAAc,IAAIL,IAAJ,CAASC,MAAM,CAACC,QAAhB,CAAd;AACA,UAAMI,OAAO,GAAGD,IAAI,CAACE,GAAL,CAASC,QAAzB;AACA,UAAMC,WAAW,GAAGH,OAAO,CAACI,aAAR,CAAsBC,eAA1C;;AACA,QAAIY,EAAE,GAAGC,OAAO,CAAC,eAAD,CAAP,CAAyBC,WAAlC;;AACA,QAAIC,MAAM,GAAGrB,IAAI,CAACsB,KAAL,CAAWC,KAAX,CAAiB,IAAjB,CAAb;AACAvB,IAAAA,IAAI,CAACE,GAAL,CAASsB,mBAAT,CAA6BpB,WAA7B,EAA0CqB,IAA1C,CAA+C,UAASC,CAAT,EAAW;AAACC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AAAgB,KAA3E,EAP2D,CAQ3D;;AACA,QAAIG,UAAU,GAAG,kCAAjB;AACA,UAAMC,gBAAgB,GAAGC,MAAM,CAACjB,IAAP,CAAYe,UAAZ,EAAwB,KAAxB,CAAzB;AACA,QAAIG,QAAQ,GAAG,IAAIhC,IAAI,CAACE,GAAL,CAAS+B,QAAb,CAAsBC,GAAtB,EAA2BC,oBAA3B,EAAiD;AAACrB,MAAAA,IAAI,EAAEV;AAAP,KAAjD,CAAf;AAEA,UAAMgC,WAAW,GAAG,IAAIlB,EAAE,CAACE,WAAP,CAAmBZ,MAAnB,CAApB;AACA4B,IAAAA,WAAW,CAACC,IAAZ,CAAiBP,gBAAjB;AACA9B,IAAAA,IAAI,CAACE,GAAL,CAASoC,qBAAT,CAA+B,OAAOF,WAAW,CAACG,SAAZ,GAAwBC,QAAxB,CAAiC,KAAjC,CAAtC;AACK;AACJ;;AAED,eAAexB,EAAf","sourcesContent":["import Web3 from 'web3';\r\n\r\n\r\nwindow.ethereum.request({ method: \"eth_requestAccounts\" });\r\nwindow.web3 = new Web3(window.ethereum);\r\nconst account = web3.eth.accounts;\r\nconst fromAddress = account.givenProvider.selectedAddress;\r\nconst toAddress = '0x57102EB7596D54cE2C139C7b047024286ca8Ba54';\r\n\r\nconst txData = {\r\n    nonce,\r\n    gasLimit,\r\n    gasPrice,\r\n    value,\r\n    data, // containing info that you want to `transfer()` to the `receiver`\r\n    from: fromAddress, // send transaction from your address\r\n    to: toAddress // CHANGED; send transaction to the contract address\r\n};\r\nfunction tx(){\r\n    if (window.ethereum && window.ethereum.chainId == '0') {\r\n        window.ethereum.request({ method: \"eth_requestAccounts\" });\r\nwindow.web3 = new Web3(window.ethereum);\r\nconst account = web3.eth.accounts;\r\nconst fromAddress = account.givenProvider.selectedAddress;\r\nvar Tx = require(\"ethereumjs-tx\").Transaction\r\nvar amount = web3.utils.toHex(1e16)\r\nweb3.eth.getTransactionCount(fromAddress).then(function(v){console.log(v);})  \r\n// set your private key here, we'll sign the transaction below\r\nvar privateKey = \"77dc2BE0B2463F8E049502330d5C9791\"  \r\nconst privateKeyBuffer = Buffer.from(privateKey, 'hex')\r\nvar contract = new web3.eth.Contract(abi, tokenContractAddress, {from: fromAddress})\r\n\r\nconst transaction = new Tx.Transaction(txData)\r\ntransaction.sign(privateKeyBuffer)\r\nweb3.eth.sendSignedTransaction('0x' + transaction.serialize().toString('hex'))\r\n    }\r\n}\r\n\r\nexport default tx"]},"metadata":{},"sourceType":"module"}